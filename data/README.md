# Data Directory

This directory contains world data (249 territories) used for location-to-flag mapping in the extension.

## File Structure

### `world-raw/` - Downloaded Source Data (Manual Management)
Contains raw territory name translations downloaded from [stefangabos/world_countries](https://github.com/stefangabos/world_countries).

**Files:**
- `world-en.json` - English territory names (249 countries)
- `world-zh_TW.json` - Traditional Chinese (ç¹é«”ä¸­æ–‡)
- `world-zh_CN.json` - Simplified Chinese (ç®€ä½“ä¸­æ–‡)
- `world-ja.json` - Japanese (æ—¥æœ¬èª)
- `world-ko.json` - Korean (í•œêµ­ì–´)
- `download-info.json` - Download metadata with timestamps and SHA-256 hashes

**How to update:**
```bash
npm run download:world
```

This will check for changes and only update files that have changed.

---

### `world-custom.json` - Manual Overrides (Manually Edited)
Contains custom overrides and aliases for politically sensitive translations or common variants.

**Structure:**
```json
{
  "overrides": {
    "TW": {
      "en": "Taiwan",
      "zh_CN": "å°æ¹¾"
    }
  },
  "additions": {},
  "aliases": {
    "TW": ["è‡ºç£"],
    "HK": ["hongkong"],
    "MO": ["macao"]
  }
}
```

**Edit this file manually** to:
- Override territory names (e.g., Taiwan instead of "Taiwan, Province of China")
- Add common name variants and aliases
- Add custom countries not in the source data

---

### `location-flags.json` - Generated Country Data (âš ï¸ DO NOT EDIT)

**AUTO-GENERATED FILE - DO NOT EDIT MANUALLY**

This file is generated by combining:
1. Raw territory data from `world-raw/`
2. Custom overrides and aliases from `world-custom.json`
3. Flag emoji conversion from ISO 3166-1 alpha-2 codes

**How to regenerate:**
```bash
npm run generate:mapper
```

This runs automatically before every build (`npm run build`).

**Structure:**
```json
{
  "ğŸ‡¹ğŸ‡¼": {
    "en": ["taiwan"],
    "zh_TW": ["å°ç£"],
    "zh_CN": ["å°æ¹¾"],
    "ja": ["å°æ¹¾åœ°åŒº"],
    "ko": ["ëŒ€ë§Œ"],
    "common": ["è‡ºç£"]
  }
}
```

---

## Workflow

### To update territory data:

1. **Download latest source data** (optional - only when upstream changes):
   ```bash
   npm run download:world
   ```

2. **Apply custom changes** (if needed):
   - Edit `world-custom.json` manually
   - Add overrides, additions, or aliases

3. **Regenerate location-flags.json**:
   ```bash
   npm run generate:mapper
   ```
   This happens automatically on build.

4. **Build the extension**:
   ```bash
   npm run build
   ```

---

## Files Tracked in Git

âœ… **Tracked** (check these in):
- `world-raw/*.json` - Source data with timestamps
- `world-custom.json` - Manual overrides
- `location-flags.json` - Generated data (for easier deployment)

âŒ **Not tracked**:
- None currently (all files are tracked for reproducibility)

---

## Notes

- The source data contains **249 countries/territories** (not just 193 UN members)
- Includes Taiwan, Hong Kong, Macau, and other territories
- Download script uses SHA-256 hashing to detect actual data changes
- Generator uses locale-aware structure for efficient runtime lookup
